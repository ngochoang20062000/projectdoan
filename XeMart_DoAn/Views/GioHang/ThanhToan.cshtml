@model List<XeMart_DoAn.Models.Gio>
@{ ViewBag.Title = "Thanh Toán";
    Layout = "~/Views/Shared/_Layout.cshtml";
    XeMart_DoAn.Models.TaiKhoan taiKhoan = new XeMart_DoAn.Models.TaiKhoan();
    decimal Tien = 0; }

@if (ViewBag.TaiKhoan != null)
{
    taiKhoan = ViewBag.TaiKhoan;
}
<main id="main" class="">
    <div id="content" class="content-area page-wrapper" role="main">
        <div class="row row-main">
            <div class="large-12 col">
                <div class="col-inner">
                    <div class="woocommerce">
                        <div class="woocommerce-notices-wrapper"></div>
                        <div class="woocommerce-form-login-toggle">
                            @if (ViewBag.TaiKhoan == null && ViewBag.Error == null)
                            {
                <div class="woocommerce-info message-wrapper">
                    <div class="message-container container medium-text-center">
                        Bạn chưa có tài khoản? <a href="@Url.Action("DangKy", "DangNhap")" class="showlogin">Tạo tài khoản mới</a>
                    </div>
                </div>
                                <div class="woocommerce-info message-wrapper">
                                    <div class="message-container container medium-text-center">
                                        Bạn đã có tài khoản? <a href="@Url.Action("Login", "DangNhap")" class="showlogin">Ấn vào đây để đăng nhập</a>
                                    </div>
                                </div>}
                            @if (@ViewBag.Error != null)
                            {
                <div class="woocommerce-info message-wrapper">
                    <div class="message-container container medium-text-center" style="color:red">
                        @ViewBag.Error
                    </div>
                </div>}
                        </div>
                        <div style="margin-bottom:20px">
                            <h1>Thông tin thanh toán</h1>
                            <br />
                        </div>
                        <form name="checkout" method="post" class="checkout woocommerce-checkout " enctype="multipart/form-data" novalidate="novalidate" action="@Url.Action("XacNhanThanhToan","GioHang")">

                            <div class="row pt-0 ">
                                <div class="large-7 col" style="width:60%;">


                                    <div id="customer_details">
                                        <div class="clear">
                                            <div class="woocommerce-billing-fields">


                                                <div class="form-group">
                                                    <div class="col-md-2">Tên : </div>
                                                    <div class="col-md-10">
                                                        <input style="width:300px;height:40px;margin-bottom:10px;" type="text" class="input-text" name="HoTen" id="hoten" value="@taiKhoan.HoTen">
                                                    </div>
                                                    <div class="col-10">
                                                        <div id="errName"></div>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <div class="col-md-2">Địa chỉ : </div>
                                                    <div class="col-md-10"><input style="width:300px;height:40px;margin-bottom:10px" type="text" class="input-text" name="diachi" id="diachi" value="@taiKhoan.DiaChi"></div>
                                                    <div class="col-10">
                                                        <div id="errdc"></div>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <div class="col-md-2">Số điện thoại : </div>
                                                    <div class="col-md-10"><input style="width:300px;height:40px;margin-bottom:10px" type="text" class="input-text" name="sodienthoai" id="sodienthoai" value="@taiKhoan.SoDienThoai"></div>
                                                    <div class="col-10">
                                                        <div id="errsdt"></div>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <div class="col-md-2">Email : </div>
                                                    <div class="col-md-10"><input style="width:300px;height:40px;margin-bottom:10px" type="email" class="input-text" name="email" id="email" value="@taiKhoan.Email"></div>
                                                    <div class="col-10">
                                                        <div id="errEmail"></div>
                                                    </div>
                                                </div>
                                                @if (ViewBag.TaiKhoan == null)
                                                {
                                                    if (ViewBag.error != null)
                                                    {
                                    @ViewBag.error;
                                }
                                    <div class="form-group">
                                        <div class="col-md-2">Mật Khẩu : </div>
                                        <div class="col-md-10"><input style="width:300px;height:40px;margin-bottom:10px" type="password" class="input-text" name="matkhau" id="matkhau"></div>
                                        <div class="col-10">
                                            <div id="errPass"></div>
                                        </div>
                                    </div> }
                                else
                                {
                                    <div class="form-group" style="display:none">
                                        <div class="col-md-2">Mật Khẩu : </div>
                                        <div class="col-md-10"><input style="width:300px;height:40px;margin-bottom:10px" type="password" class="input-text" name="matkhau" id="matkhau" value="@taiKhoan.MatKhau"></div>
                                        <div class="col-10">
                                            <div id="errPass"></div>
                                        </div>
                                    </div>}

                                            </div>


                                        </div>
                                        <div>
                                            <h1>Thông tin bổ sung</h1>
                                        </div>
                                        

                                            <div style="margin-top:20px;">

                                                <p class="form-row notes" id="order_comments_field" data-priority="">
                                                    <br />
                                                    <label for="order_comments" class="">Ghi chú đơn hàng&nbsp;<span class="optional">(tuỳ chọn)</span></label>
                                                    <br />
                                                    <textarea type="text" name="GhiChu" style="width:600px;height:100px"></textarea>
                                                </p>



                                            </div>
                                        
                                    </div>



                                </div>

                                <div class="large-5 col" style="width:40%;">

                                    <div class="col-inner has-border">
                                        <div class="checkout-sidebar sm-touch-scroll">


                                            


                                            <div id="order_review" class="woocommerce-checkout-review-order">
                                                <br />
                                                <table class="shop_table woocommerce-checkout-review-order-table" style="width:400px;text-align:center;font-size:20px;">
                                                    <thead >
                                                        <tr>
                                                            <th>
                                                                <h1>Đơn hàng của bạn</h1>
                                                            </th>
                                                        </tr>
                                                        <tr style="background-color:deepskyblue">
                                                            <th class="product-name">Sản phẩm</th>
                                                            <th class="product-total">Tạm tính</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        @foreach (var item in Model)
                                                        {
                                                            
                                                            
                                                            Tien += item.sanPham.Gia * item.soLuong;

                                            <tr class="cart_item">
                                                <td class="product-name" style="padding: 10px 10px 10px 10px">
                                                    @item.sanPham.TenSP<strong class="product-quantity">×&nbsp;@item.soLuong</strong>
                                                </td>
                                                <td class="product-total">
                                                    <span class="woocommerce-Price-amount amount"><bdi>@String.Format("{0:#,###}", @item.soLuong * item.sanPham.Gia)<span class="woocommerce-Price-currencySymbol">₫</span></bdi></span>
                                                </td>
                                            </tr>}

                                                    </tbody>
                                                    <tfoot>

                                                        <tr class="order-total">
                                                            <th>Tổng</th>
                                                            <td><strong><span class="woocommerce-Price-amount amount"><bdi>@String.Format("{0:#,###}", @Tien)<span class="woocommerce-Price-currencySymbol">₫</span></bdi></span></strong> </td>
                                                        </tr>


                                                    </tfoot>
                                                </table>
                                                <br />
                                                <div id="payment" class="woocommerce-checkout-payment">
                                                    <ul class="wc_payment_methods payment_methods methods">
                                                        <li class="wc_payment_method payment_method_cod">
                                                            <label for="payment_method_cod" style="font-size:20px">
                                                                Trả tiền mặt khi nhận hàng
                                                            </label>
                                                            <div class="payment_box payment_method_cod" style="display:none;">
                                                                <p>Chúng tôi sẽ gửi hàng cho bạn. Bạn nhận được hàng và trả tiền mặt khi nhận hàng</p>
                                                            </div>
                                                        </li>
                                                    </ul>
                                                    <br />
                                                    <div class="form-row place-order" id="thanhtoan">
                                                        <button style="color:white;background-color:Highlight;border:0;width:200px;cursor:pointer;height:40px;font-size:20px" type="button" class="button alt" onClick="abc(this.form)" name="woocommerce_checkout_place_order" id="place_order" value="Đặt hàng" data-value="Đặt hàng">Đặt hàng</button>
                                                    </div>
                                                </div>

                                            </div>
                                            <br />
                                            <div class="woocommerce-privacy-policy-text">
                                                <p>Thông tin cá nhân của bạn sẽ được sử dụng để xử lý đơn hàng, tăng trải nghiệm sử dụng website, và cho các mục đích cụ thể khác đã được mô tả trong <a href="" class="woocommerce-privacy-policy-link" target="_blank">chính sách riêng tư</a>.</p>
                                            </div>
                                        </div>
                                    </div>

                                </div>

                            </div>
                        </form>

                    </div>


                </div>
            </div>
        </div>
    </div>

</main>
<script language="javascript" src="~/wwwroot/js/checkthanhtoan.js" type="text/javascript"></script>
